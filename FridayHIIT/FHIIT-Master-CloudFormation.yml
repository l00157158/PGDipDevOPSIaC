AWSTemplateFormatVersion: 2010-09-09
Description: Master CloudFormation template to orchestrate all sub-modules

Resources:
  ParametersStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-Parameters.yml

  NFHIIT-Network-Infra:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-Network-Infra.yml


  SecurityGroupsStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-Ec2-Sg.yml

  EC2InstancesStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-EC2-Instances.yml
  
  RDSSecurityStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-RDS-sg.yml

  RDSDatabaseStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://fhiit-cloudformation.s3.eu-west-1.amazonaws.com/FHIIT-RDS-Instances.yml

Outputs:
  VPCId:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.VPCId
  ElasticIP:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.ElasticIP
  PPubSubnetID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PubSubnetID
  PvtSubNet1ID: 
   Value: !GetAtt NFHIIT-Network-Infra.Outputs.PvtSubNet1ID
  PvtSubNet2ID: 
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PvtSubNet2ID
  SQLSubnetID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.SQLSubnetID
  InternetGatewayId:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.InternetGatewayId
  AttachGateWayID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.AttachGateWayID
  PublicRouteTableID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PublicRouteTableID
  PrivateRouteTableID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PrivateRouteTableID
  PrivateRouteId:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PrivateRouteId
  PvtSubnet1RouteTableAssociationID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PvtSubnet1RouteTableAssociationID
  PvtSubnet21RouteTableAssociationID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PvtSubnet21RouteTableAssociationID
  PublictRouteID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PublictRouteID
  PubSubnetRouteTableAssociationID:
    Value: !GetAtt NFHIIT-Network-Infra.Outputs.PubSubnetRouteTableAssociationID